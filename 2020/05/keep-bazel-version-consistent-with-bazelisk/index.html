<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Keep Bazel version consistent with Bazelisk</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Use Bazelisk to keep bazel version the same across many machines.">
  <meta name="generator" content="Hugo 0.55.5" />
  <link href="" rel="alternate" type="application/rss+xml" title="Kenneth Feng" />
  <link href="https://kfeng.me//css/bootstrap.min.css" rel="stylesheet">
  <link href="https://kfeng.me//css/hc.css" rel="stylesheet">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
  
    
    </head>
    <body>
<div class="nav-toggle"><i class="fa fa-bars fa-2x"></i> Herring Cove </div>
      <div id = "wrapper">


<div class="navbar navbar-default" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a href="https://kfeng.me//"><p class="navbar-brand">Kenneth Feng</p></a>
        </div>
        <div class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
					
					
					<li><a href="https://kfeng.me/post/">Blog </a></li>
					
					<li><a href="https://kfeng.me/pages/about/">Cv </a></li>
					
					<li><a href="https://kfeng.me/">Home </a></li>
					
          </ul>
        </div>
      </div>
    </div>



       
       <div id="sidebar-wrapper">
        <ul class="sidebar-nav">
					<img src="/pics/kenneth.jpg" />
          <li class="sidebar-brand"><a href="https://kfeng.me//"><h1 class="brand">Kenneth Feng</h1></a><h3>My thoughts on software developments, cooking, and many other things in life</h3></li>
          <hr />
					
						<li><a href="https://kfeng.me/post/">Blog </a></li>
					
						<li><a href="https://kfeng.me/pages/about/">Cv </a></li>
					
						<li><a href="https://kfeng.me/">Home </a></li>
					
          <hr />
          <div id="social-wrapper">
           <li> <a href="https://twitter.com/kennethzfeng"><i class="fa fa-twitter-square"></i> @twitter</a></li>
           <li> <a href="https://linkedin.com/in/kennethzfeng"><i class="fa fa-linkedin-square"></i> linkedin</a> </li>
           
           <li> <a href="https://github.com/kennethzfeng"><i class="fa fa-github-square"></i> github</a> </li>
         </div>
       </ul>
     </div>



     <div class="container">


  <div id="article">
   <div class="article-title">Keep Bazel version consistent with Bazelisk</div>
   <p class="meta"><small>&nbsp;<i class="fa fa-calendar-o"></i> 2020-05-14</small></p> <hr/>
   <div class="post">
     

<h2 id="bazel">Bazel</h2>

<p>Bazel is a build system, which allows you to build and test source code written in many programming languages and other things such as Protocol Buffer.
Keeping bazel version consistent across developer machines and continuous integration machines is challenging.
Often, a continuous integration machine is running an older version of bazel.  The bazel installation on the CI machine needs
to be managed by someone who has privilege to install software.</p>

<h2 id="tools-bazel">tools/bazel</h2>

<p>Bazel provides a default way to wrap around the real Bazel binary on a machine.
If <code>tools/bazel</code> exists in a repository, Bazel will execute the <code>tools/bazel</code> instead of the real bazel binary.
<code>tools/bazel</code> can then ensure the bazel binary installed on the machine is the right version.</p>

<h2 id="bazelisk">Bazelisk</h2>

<p>If writing the <code>tools/bazel</code> script is too much work, using <a href="https://github.com/bazelbuild/bazelisk">Bazelisk</a> is
another option.  The idea is to check in both the linux binary and the macos binary of bazelisk
into the repository so that developer and the CI system can execute bazelisk without talking to the internet.
For those using Windows, you can check in the window binary as well.</p>

   </div>
 </div>


 <a href="https://twitter.com/share" class="twitter-share-button " data-size="small" data-count="none">Tweet</a>
 <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>

 <ul class="pager">
      &nbsp;<li class="previous"><a href="https://kfeng.me/2016/11/upgrading-pip-from-v1.4.1/"> Upgrading pip from v1.4.1</a></li>
     
</ul>



    </ul>
    </div>
    <footer>

        <p class="text-muted credit">Copyright (c) 2014 - 2015, Kenneth Feng; all rights reserved.</p>
    </footer>
 
    <script src="https://kfeng.me//js/jquery-1.10.2.min.js"></script>
    <script src="https://kfeng.me//js/bootstrap.min.js"></script>
    <script src="https://kfeng.me//js/bootstrap.js"></script>
    <script type="text/javascript" src="https://kfeng.me//js/hc.js"></script>
</body>

</html>

